{% extends "layout.html" %}

{% block content %}
<div class="container mb-5">
    <h1 class="mb-4 text-center">
        <i class="fas fa-chart-bar text-primary me-2"></i>
        Comparative Analysis Results
    </h1>
    
    <div class="row mb-4">
        <div class="col-md-6">
            <div class="card h-100 border-0 shadow-sm">
                <div class="card-header bg-primary text-white">
                    <h4 class="mb-0">
                        <i class="fas fa-building me-2"></i>
                        {{ memo.company_a_name }} - Financial Model
                    </h4>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <tbody>
                                <tr>
                                    <th scope="row">Revenue Projection</th>
                                    <td>₹{{ "{:,.2f}".format(memo.company_a_model.revenue_projection) }} million</td>
                                </tr>
                                <tr>
                                    <th scope="row">Operating Income Projection</th>
                                    <td>₹{{ "{:,.2f}".format(memo.company_a_model.operating_income_projection) }} million</td>
                                </tr>
                                <tr>
                                    <th scope="row">Growth Rate</th>
                                    <td>{{ "{:.2f}".format(memo.company_a_model.growth_rate) }}%</td>
                                </tr>
                                <tr>
                                    <th scope="row">Discount Rate</th>
                                    <td>{{ "{:.2f}".format(memo.company_a_model.discount_rate) }}%</td>
                                </tr>
                                <tr>
                                    <th scope="row">Terminal Growth Rate</th>
                                    <td>{{ "{:.2f}".format(memo.company_a_model.terminal_growth_rate) }}%</td>
                                </tr>
                                <tr>
                                    <th scope="row">Valuation Estimate</th>
                                    <td>₹{{ "{:,.2f}".format(memo.company_a_model.valuation_estimate) }} million</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="mt-4">
                        <h5>Key Assumptions</h5>
                        <p>{{ memo.company_a_model.key_assumptions|nl2br }}</p>
                    </div>
                    
                    <div class="mt-4">
                        <h5>Summary</h5>
                        <p>{{ memo.company_a_model.summary|nl2br }}</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="col-md-6">
            <div class="card h-100 border-0 shadow-sm">
                <div class="card-header bg-success text-white">
                    <h4 class="mb-0">
                        <i class="fas fa-building me-2"></i>
                        {{ memo.company_b_name }} - Financial Model
                    </h4>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <tbody>
                                <tr>
                                    <th scope="row">Revenue Projection</th>
                                    <td>₹{{ "{:,.2f}".format(memo.company_b_model.revenue_projection) }} million</td>
                                </tr>
                                <tr>
                                    <th scope="row">Operating Income Projection</th>
                                    <td>₹{{ "{:,.2f}".format(memo.company_b_model.operating_income_projection) }} million</td>
                                </tr>
                                <tr>
                                    <th scope="row">Growth Rate</th>
                                    <td>{{ "{:.2f}".format(memo.company_b_model.growth_rate) }}%</td>
                                </tr>
                                <tr>
                                    <th scope="row">Discount Rate</th>
                                    <td>{{ "{:.2f}".format(memo.company_b_model.discount_rate) }}%</td>
                                </tr>
                                <tr>
                                    <th scope="row">Terminal Growth Rate</th>
                                    <td>{{ "{:.2f}".format(memo.company_b_model.terminal_growth_rate) }}%</td>
                                </tr>
                                <tr>
                                    <th scope="row">Valuation Estimate</th>
                                    <td>₹{{ "{:,.2f}".format(memo.company_b_model.valuation_estimate) }} million</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="mt-4">
                        <h5>Key Assumptions</h5>
                        <p>{{ memo.company_b_model.key_assumptions|nl2br }}</p>
                    </div>
                    
                    <div class="mt-4">
                        <h5>Summary</h5>
                        <p>{{ memo.company_b_model.summary|nl2br }}</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="card border-0 shadow-sm">
        <div class="card-header bg-info text-white">
            <h4 class="mb-0">
                <i class="fas fa-balance-scale me-2"></i>
                Comparative Analysis
            </h4>
        </div>
        <div class="card-body">
            <h5>Comparative Analysis</h5>
            <p>{{ memo.comparative_analysis.comparative_analysis|nl2br }}</p>
            
            <h5 class="mt-4">Overall Recommendation</h5>
            <div class="alert alert-secondary">
                <p>{{ memo.comparative_analysis.overall_recommendation|nl2br }}</p>
            </div>
        </div>
    </div>
    
    <div class="text-center mt-4">
        <a href="{{ url_for('index') }}" class="btn btn-primary">
            <i class="fas fa-arrow-left me-2"></i>
            Analyze Another Set of Documents
        </a>
    </div>
</div>
{% endblock %}
